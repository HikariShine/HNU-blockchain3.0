[Hyperledger](http://www.flydean.com/category/blockchain/hyperledger/)

# 分布式账本简介

2020-01-03

文章目录



[什么是分布式分布式账本](http://www.flydean.com/introduction-to-distributed-ledgers/#什么是分布式分布式账本)[分布式账本在现实业务中的作用](http://www.flydean.com/introduction-to-distributed-ledgers/#分布式账本在现实业务中的作用)[当前业务分布式账本的问题](http://www.flydean.com/introduction-to-distributed-ledgers/#当前业务分布式账本的问题)[什么是区块链](http://www.flydean.com/introduction-to-distributed-ledgers/#什么是区块链)[区块链网络如何工作](http://www.flydean.com/introduction-to-distributed-ledgers/#区块链网络如何工作)[区块链的商业利益](http://www.flydean.com/introduction-to-distributed-ledgers/#区块链的商业利益)[区块链的使用](http://www.flydean.com/introduction-to-distributed-ledgers/#区块链的使用)[什么是超级账本](http://www.flydean.com/introduction-to-distributed-ledgers/#什么是超级账本)[企业区块链要求](http://www.flydean.com/introduction-to-distributed-ledgers/#企业区块链要求)

# 什么是分布式分布式账本

分布式账本是一种数据库类型，可在分散网络的成员之间共享，复制和同步。分布式账本记录网络参与者之间的交易，例如资产或数据交换。

网络的参与者对分布式账本中记录的更新进行管理并达成共识。不涉及中央机构或第三方调解人，例如金融机构或票据交换所。分布式账本中的每个记录都有一个时间戳和唯一的加密签名，从而使分布式账本中的所有交易都可以被审核，并不会被篡改。

# 分布式账本在现实业务中的作用

在当今互联互通的世界中，经济活动发生在跨越国家，地理和管辖范围的商业网络中。业务网络通常在市场上聚集在一起，在这些市场上，参与者（例如生产者，消费者，供应商，合作伙伴，市场制造者/使能者以及其他利益相关者）拥有，控制并行使其对价值（称为资产）对象的权利。

资产可以是有形的和有形的，例如汽车，房屋或草莓，也可以是无形的和虚拟的，例如契约，专利和股票证书。资产所有权和转移是在业务网络中创造价值的交易。

交易通常涉及各种参与者，例如买方，卖方和中介（例如银行，审计师或公证人），其业务协议和合同记录在分布式账本中。企业通常使用多个分布式账本来跟踪其各个业务部门中的资产所有权和参与者之间的资产转移。分布式账本是企业经济活动和利益的记录系统。

典型的分布式账本如下所示：

![img](https://img-blog.csdnimg.cn/2020010314534229.png)

# 当前业务分布式账本的问题

当今使用的业务分布式账本在许多方面都是不足的。它们效率低下，成本高昂，并且容易被滥用和篡改。缺乏透明度以及对腐败和欺诈的敏感性，导致争执。这些风险和不确定性会导致失去商机。

此外，每个网络参与者自己的系统上业务分布式账本的不同步副本会导致对临时，错误数据做出错误的业务决策。或者在对账本的不同副本进行核对时，做出充分知情决定的能力会延迟。

# 什么是区块链

区块链是一种防篡改的共享数字分布式账本，可记录公共或私有对等网络中的交易。分布式账本分布到网络中的所有成员节点，以加密散列链接的块的顺序链，永久记录网络中对等点之间发生的资产交换的历史记录。

所有已确认和验证的交易区块都从链的开头链接到最新区块，因此命名为区块链。因此，区块链充当单一事实来源，并且区块链网络中的成员只能查看与之相关的那些交易。

# 区块链网络如何工作

区块链网络中的成员节点不依赖第三方（例如金融机构）来调解交易，而是使用共识协议来同意账本内容，加密哈希和数字签名以确保交易的完整性。

共识确保共享分布式账本是准确的副本，并降低了欺诈性交易的风险，因为篡改必须在完全相同的时间在许多地方进行。诸如SHA256计算算法之类的密码散列可确保对交易输入的任何更改（即使是最小的更改）都将导致计算出不同的哈希值，这表明潜在的交易输入受到损害。数字签名可确保交易源自发件人（使用私钥签名），而不是冒名顶替者。

分散的点对点区块链网络可防止任何单个参与者或参与者组控制基础基础架构或破坏整个系统。网络中的参与者都是平等的，遵循相同的协议。他们可以是个人，国家行为者，组织，也可以是所有这些类型的参与者的组合。

在其核心部分，系统使用选定的共识模型记录所有节点都同意交易有效性的交易时间顺序。结果是无法更改或撤消的交易，除非网络中所有成员在后续交易中都同意更改。

# 区块链的商业利益

在旧的业务网络中，所有参与者都保持自己的分布式账本，重复和差异会导致纠纷，增加的结算时间以及需要中介机构及其相关的间接费用。但是，通过使用基于区块链的共享分布式账本，交易一旦通过共识验证并写入分布式账本就无法更改，企业可以节省时间和成本，同时降低风险。

区块链共识机制的好处是可以减少错误，提供近乎实时的参考数据，从而为参与者提供了统一一致的数据集，并为参与者提供了更改其资产描述的灵活性。

由于没有一个参与成员拥有共享账本中包含的信息的来源，因此区块链技术可提高参与成员之间交易信息流的信任度和完整性。

区块链技术的不变性机制可降低审计成本和法规遵从性，并提高透明度。而且，由于使用区块链技术在商业网络上执行的合同是自动化且最终的，因此企业可从提高的执行速度，降低的成本和较低的风险中受益，所有这些使企业能够建立新的收入流与客户进行交互。

# 区块链的使用

区块链作为支撑比特币交易的技术首次被引入市场，但其在商业领域的实际应用远远超出了加密货币交易。例如，在金融领域，区块链网络允许证券交易在数分钟而不是数天之内结算。在供应链中，区块链网络允许实时跟踪和记录商品和付款流。

为了确定您的用例是否适合区块链，请问自己以下问题：

- 是否涉及业务网络？
- 是否使用共识来验证交易？
- 是否需要审核跟踪或出处？
- 交易记录是否必须是不可变的或防篡改的？
- 争议解决应该是最终的吗？

如果您对第一个问题和至少一个问题回答是，那么您的用例将受益于区块链技术。始终需要网络参与才能使区块链成为正确的解决方案，但是网络可以采用多种形式。网络可以在组织之间，例如供应链，也可以在组织内部。例如，在组织内部，可以使用区块链网络在各部门之间共享参考数据或创建审核或合规网络。网络也可以存在于个人之间，例如，他们可能需要在区块链上存储数据，数字资产或合同。

# 什么是超级账本

Hyperledger是一项开源工作，旨在推动跨行业的区块链技术供企业使用。这是由LinuxFoundation®主持的全球合作，其中包括金融，银行，物联网，供应链，制造和技术领域的领导者。这183个不同的成员和9个正在进行的项目（包括Hyperledger Fabric）协同工作，以创建一个开放的，标准化的企业级分布式分布式账本框架和代码库。

Hyperledger Fabric框架在许可的网络上支持分布式分布式账本解决方案，成员之间彼此了解，适用于广泛的行业。它的模块化架构最大程度地提高了区块链解决方案的机密性，弹性和灵活性。

# 企业区块链要求

我们相信区块链是一种真正的颠覆性技术，可以改变业务网络。我们还认为，这种创新必须与其他技术公司和行业合作进行公开进行。

工业级区块链技术具有以下特征：

- 共享的，允许的分布式账本是仅附加记录系统（SOR）和单一事实来源。对于在业务网络渠道中经过身份验证的成员而言，它是可见的。
- 商业网络的所有参与成员都同意的共识协议可确保仅使用网络验证的交易更新分布式账本。
- 密码术可确保防篡改的安全性，身份验证和交易的完整性。
- Chaincode（也称为智能合约）封装了网络上发生的业务的参与者协议条款。链码存储在区块链中的验证对等节点上。

除这些属性外，企业区块链技术还需要满足关键的行业要求，例如性能，经过验证的身份以及私人和机密交易。 Hyperledger Fabric旨在满足这些需求。它还设计有可插入的共识模型，使企业可以为其网络选择最佳算法。

更多教程请参考 [flydean的博客](http://www.flydean.com/introduction-to-distributed-ledgers/)





[Hyperledger](http://www.flydean.com/category/blockchain/hyperledger/)

# Fabric的6大特性

2020-01-03

文章目录



[什么是Hyperledger Fabric](http://www.flydean.com/6-technical-advantages-of-fabric/#什么是Hyperledger_Fabric)[1. 成员准入](http://www.flydean.com/6-technical-advantages-of-fabric/#1_成员准入)[2. 性能，可伸缩性和信任级别](http://www.flydean.com/6-technical-advantages-of-fabric/#2_性能，可伸缩性和信任级别)[3 需要了解的数据](http://www.flydean.com/6-technical-advantages-of-fabric/#3_需要了解的数据)[4 通过不可变的分布式账本进行复杂查询](http://www.flydean.com/6-technical-advantages-of-fabric/#4_通过不可变的分布式账本进行复杂查询)[5 支持插件组件的模块化架构](http://www.flydean.com/6-technical-advantages-of-fabric/#5_支持插件组件的模块化架构)[6 保护数字钥匙和敏感数据](http://www.flydean.com/6-technical-advantages-of-fabric/#6_保护数字钥匙和敏感数据)

# 什么是Hyperledger Fabric

为了满足现代业务需求，IBM与其他公司合作，共同开发了一个开放源代码，可立即投入生产的业务区块链框架，称为Hyperledger Fabric™，这是由LinuxFoundation®托管的8个Hyperledger®项目之一。

Hyperledger Fabric是被广泛使用的，支持准入网络上的分布式账本解决方案。它的模块化架构最大程度地提高了区块链解决方案的机密性，弹性和灵活性。

# 1. 成员准入

Hyperledger Fabric是用于准入网络的框架，其中所有参与者都具有已知身份。在考虑准入的网络时，您应该考虑您的区块链用例是否需要遵守数据保护法规。许多用例（尤其是在金融部门和医疗保健行业）受数据保护法律的约束，这些法律要求了解网络的成员是谁以及谁在访问特定数据。

例如，考虑一家私募股权公司。根据定义，私募股权不在证券交易所公开交易，其投资者通常是风险投资公司，私募股权公司或天使投资者。该网络的参与者必须是已知的，并且在资金方面具有信誉，才能进行投资才能参与区块链。

# 2. 性能，可伸缩性和信任级别

Hyperledger Fabric建立在模块化架构之上，该架构将事务处理分为三个阶段：分布式逻辑处理和协议（“链码”），事务排序以及事务验证和承诺。这种分离具有多个优点：跨节点类型所需的信任和验证级别更少，并且网络可伸缩性和性能得到了优化。

为了说明这一点，让我们看一下Hyperledger Fabric v1.0中的事务流，如下图所示。

![img](https://img-blog.csdnimg.cn/20200103225737275.png)

从图的左侧开始：
1）交易建议由应用程序提交给背书的peer节点。

2）背书政策概述了签署提案需要多少个背书人和/或哪些背书人组合。背书者执行链码以模拟网络对等方中的提议，从而创建一个读/写集。

3）然后背书的peer节点将签名的提案响应（背书）发送回应用程序。

4）应用程序将交易和签名提交给Order服务

5）创建一批或一组交易，并将其交付给提交peer节点。

6）当提交peer节点收到一批事务时

7）验证是否符合背书策略，并检查读/写集以检测冲突的事务。如果两项检查均通过，则该块将提交到账本，并且每个事务的状态更新都将反映在状态数据库中。

由于使用新的v1.X架构，只有签名和读/写集是通过网络发送的，因此可伸缩性和性能得到了优化。此外，由于只有背书人和提交人才能真正看到交易，因此在区块链系统的不同部分中需要较少的信任级别，从而提供了更高的安全性。

例如，在资本市场中，随着股权支持证券或债券的买卖，交易量由于参与者的增加而增加。增加的事务需要改进的可伸缩性和性能，Hyperledger Fabric v1.X提供了此功能，部分原因是拆分了链代码执行。

拆分链码执行还可以使网络动态增长。在Hyperledger Fabric v1.X中，可以动态和以编程方式添加peer，而不是像v0.6中那样以静态方式添加。例如，假设一家管理外汇汇率的公司有一家新银行要添加到网络中。使用Hyperledger Fabric v1.X，他们可以以编程方式执行此操作。

# 3 需要了解的数据

由于竞争力，保护法和个人数据机密性的规定，企业需要对某些数据元素进行隐私保护，这可以通过在区块链上进行数据分区来实现。 Hyperledger Fabric支持的通道允许数据仅传递给需要了解的各方。

例如，许多金融实体对竞争对手甚至看到正在处理的交易数量表示担忧。一些金融机构认为加密“不足”来保护其数据。鉴于某些金融工具需要花费10年或更长的时间才能实现价值，随着时间的流逝，密码破解的风险可能会使私人信息公开。通道帮助提供了数据分区功能，只有那些需要了解数据的人员才能看到事务数和数据本身。

# 4 通过不可变的分布式账本进行复杂查询

分布式账本是区块链应用程序状态转换的顺序记录。每笔交易都会产生一组资产键值对，这些键值对在创建，更新或删除时将被提交到账本。 peer支持LevelDB和CouchDB两种格式存储。

默认情况下，LevelDB键值数据库支持键查询，复合键查询和键范围查询。如果您还需要复杂的丰富查询，则可以使用CouchDB，它支持LevelDB的基本功能，并添加完整的数据复杂查询。这种文档数据库（例如CouchDB）的内容是JSON格式的，同时支持复杂查询，其中数据模型与现有键/值编程模型兼容。

这种JSON格式有助于最大程度地减少生成简单报告和执行审核功能所需的工作。例如，在供应链场景中，您可以使用JSON文档样式来帮助概述商品和运输实体的特定数据。您可以轻松地生成用于资产到最终目的地的不同地点和运输实体的资产报告。

# 5 支持插件组件的模块化架构

Hyperledger Fabric体系结构的模块化使网络设计人员可以插入其首选组件实现，这是一个优势。最需要模块化的领域之一是“使用自己的身份认证系统”。很多公司已经具有自己的身份管理，并且想要重用而不是重建。

可插拔的体系结构的其他组件包括共识或加密，允许使用自己的加密标准。

# 6 保护数字钥匙和敏感数据

HSM（硬件安全模块）提供了对数字密钥的高级保护。对于涉及身份管理的方案，HSM可以更好的保护密钥和敏感数据。

更多教程请参考 [flydean的博客](http://www.flydean.com/6-technical-advantages-of-fabric/)

Tags: [fabric](http://www.flydean.com/tag/fabric/)[hyperledger](http://www.flydean.com/tag/hyperledger/)[区块链](http://www.flydean.com/tag/区块链/)

[Hyperledger](http://www.flydean.com/category/blockchain/hyperledger/)

# Hyperledger Fabric基础知识

2020-01-03

文章目录



[什么是Hyperledger Fabric？](http://www.flydean.com/hyperledger-fabric-basics/#什么是Hyperledger_Fabric？)[Hyperledger架构是怎么工作的？](http://www.flydean.com/hyperledger-fabric-basics/#Hyperledger架构是怎么工作的？)[Hyperledger交易如何执行](http://www.flydean.com/hyperledger-fabric-basics/#Hyperledger交易如何执行)[总结](http://www.flydean.com/hyperledger-fabric-basics/#总结)

Hyperledger Fabric基础知识

本文我们会介绍Hyperledger Fabric的基础知识，并了解如何充分利用这个多功能的区块链框架。

区块链技术为创新提供了丰富的机会。它提供了一种新的交易方式，从而可以从根本上改变业务的实现。

那么，在众多的区块链框架中，开发人员应该首先掌握哪个框架呢？IBM开发的Hyperledger Fabric肯定是最佳选择，尤其在今天这个公链应用不明朗的情况下，使用Fabric开发联盟链应该是最常见也最实用的框架了。

Hyperledger是一种开源协作成果，旨在促进跨行业的区块链技术供企业使用。该全球合作由The Linux Foundation主持。

Hyperledger孵化并支持一系列区块链业务技术，框架，库和应用程序。 Hyperledger项目托管了多个区块链框架，包括Hyperledger Fabric。本文概述了什么是Hyperledger Fabric，如何使用它来构建解决方案以及如何在Hyperledger Fabric中执行事务。

# 什么是Hyperledger Fabric？

Hyperledger Fabric是用于私有链和联盟链业务网络的开源框架实现，其中成员身份和角色对于其他成员是已知的。它是一种模块化的架构。它允许账本数据库，共识机制和成员资格服务等组件即插即用。它使用了容器技术，从而提供了企业级的网络安全性，可伸缩性和机密性。

Hyperledger Fabric网络具有以下组件：

- Assets。资产是任何有价值的东西。资产具有状态和所有权。资产在Hyperledger Fabric中表示为键值对的集合。

  

- Shared ledger。共享账本记录资产的状态和所有权。共享账本包括两个部分：

  - world state描述了给定时间点的共享账本状态。这是共享账本的数据库。
  - blockchain是记录所有交易的交易日志历史记录。

- Smart contract。 Hyperledger Fabric智能合约称为chaincode。 Chaincode是定义资产和相关交易的软件；换句话说，它包含系统的业务逻辑。当应用程序需要与共享账本交互时，将调用Chaincode。链码可以用Golang或Node.js编写。

  

- Peer nodes。Peer是网络的基本元素，因为它们托管共享账本和智能合约。Peer执行链码，访问共享账本数据，认可交易并与应用程序对接。Peer可以是endorsing peers，也可以是endorsers。每个链码都可以指定背书策略，该政策定义了有效交易背书的必要条件和充分条件。

- Channel。通道是由peers集合形成的逻辑结构。此功能允许一组peers创建单独的交易共享账本。

- Organizations。 Hyperledger Fabric网络是由网络中不同组织拥有和贡献的peers构建的。该网络之所以存在是因为组织将其个人资源贡献给了集体网络。peers具有成员资格服务提供商从其所属组织分配的身份（数字证书）。不同组织的Peers可以在同一channel上。

- Membership Services Provider (MSP)。 MSP是证书颁发机构，以管理用于认证成员身份和角色的证书。在Hyperledger Fabric网络中，所有的节点必须要有认证过的身份才能进行交易。MSP管理用户ID并验证网络上的所有参与者，从而使Hyperledger Fabric成为一个私有的和准入的网络。

- Ordering service。Ordering service将交易打包成块，以交付给通道上的peers。它保证了网络中的交易顺利执行。它与peers和endorsing peers进行通信。Ordering service目前只支持Solo和Kafka。

下图是Hyperledger Fabric的组件和构成：

![img](https://img-blog.csdnimg.cn/20200103071557165.png)

# Hyperledger架构是怎么工作的？

在Hyperledger解决方案中，Hyperledger Fabric网络充当后端，而应用程序前端则与网络进行通信。 SDK可帮助您在前端和后端之间建立通信，例如Node.js SDK和Java SDK。 SDK提供了一种执行用户链码，在网络中执行事务，监视事件等的方法。

要编写区块链应用程序，您需要：

1. 用受支持的编程语言（例如Go）编写chaincode。
2. 在Hyperledger Fabric网络上部署链码。
3. 使用SDK开发客户端应用程序。

# Hyperledger交易如何执行

Hyperledger Fabric网络中事务的请求流如下所示：

1. 客户端使用Node.js或Java™SDK连接到Hyperledger Fabric网络。客户端使用SDK API，创建一个事务并将其发送给背书peer。
2. endorsing peer会验证客户的签名，模拟交易并发送背书签名。
3. 如果交易得到认可，则客户将交易提交给ordering service。否则，交易被取消。
4. ordering service将交易传递给peers。所有peers都提交并应用相同的事务序列并更新其状态。

# 总结

Hyperledger Fabric是一个区块链框架实现。 你可以很轻松的使用Hyperledger来构建一个私人或联盟网络，并为其编写智能合约。

当然Hyperledger相对其他的区块链框架而言还是比较复杂的，因为它是专为企业级应用而生的。后面我们会详细讲解。

更多教程请参考 [flydean的博客](http://www.flydean.com/hyperledger-fabric-basics/)