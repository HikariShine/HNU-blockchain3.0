# [CDN？](https://www.wukong.com/question/6447765514872684813/)

CDN的全称是内容分发网络，比如我们客户端向服务器请求一个数据，当这个数据很大，请求频繁，而且服务器距离客户端很远这样是不是很浪费资源，浪费大量的带宽，严重时候还会造成网络阻塞。而且这样响应时间非常慢。

![img](http://p9.pstatp.com/large/tos-cn-i-0022/82c4e4386d2d48279c4b7865420308c7)



**CDN主要由负载均衡，和高速缓存服务器组成。**其中分为中心部分和边缘部分。中心部分就是负责全局负载均衡，当客户端发送请求，首先会访问中心CDN，经过全局负载均衡，根据用户请求的ip 地址，一定的算法，然后算出距离用户最近，用户接入量最少得CDN缓存服务器，这样是不是相当于走了捷径。因为cdn是介于客户端和请求服务器之间的一个缓存服务器，有一点点像redis缓存。当然第一次请求的时候，cdn没有缓存的话，cdn也会请求一次服务器，然后根据服务器返回的数据一方面留给自己缓存作为备用，另一方面也返回给客户端，好像现在像腾讯网，阿里云都有提供cdn服务器。而且域名配置服务器时候，就可以配到cdn。

而且现在应用也很多，比如网络教学，金融，证券，不允许有过多延迟和数据较大的应用。这就是我大致了解的cdn ，content delivery network ，内容分发网络。

![img](http://p1.pstatp.com/large/tos-cn-i-0022/429da3d6e0e34a7e9fb170a451d52521)



CDN的全称是Content Delivery Network，即内容分发网络。其基本思路是尽可能避开互联网上有可能影响数据传输速度和稳定性的瓶颈和环节，使内容传输的更快、更稳定。通过在网络各处放置节点服务器所构成的在现有的互联网基础之上的一层智能虚拟网络，CDN系统能够实时地根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上。其目的是使用户可就近取得所需内容，解决 Internet网络拥挤的状况，提高用户访问网站的响应速度。

![img](http://p3.pstatp.com/large/tos-cn-i-0022/e2050a45b529460f8f1fc4d2346bb0a8)



　　目前的CDN服务主要应用于证券、金融保险、ISP、ICP、网上交易、门户网站、大中型公司、网络教学等领域。另外在行业专网、互联网中都可以用到，甚至可以对局域网进行网络优化。利用CDN，这些网站无需投资昂贵的各类服务器、设立分站点，特别是流媒体信息的广泛应用、远程教学课件等消耗带宽资源多的媒体信息，应用CDN网络，把内容复制到网络的最边缘，使内容请求点和交付点之间的距离缩至最小，从而促进Web站点性能的提高，具有重要的意义。CDN 网络的建设主要有企业建设的CDN网络，为企业服务；IDC的CDN网络，主要服务于IDC和增值服务；网络运营上主建的CDN网络，主要提供内容推送服务；CDN网络服务商，专门建设的CDN用于做服务，用户通过与CDN机构进行合作，CDN负责信息传递工作，保证信息正常传输，维护传送网络，而网站只需要内容维护，不再需要考虑流量问题。

![img](http://p1.pstatp.com/large/tos-cn-i-0022/07ff0e48d9d3436293441ab71c5bc6f8)



## 　　CDN的网络架构

　　CDN网络架构主要由两大部分，分为中心和边缘两部分，中心指CDN网管中心和DNS重定向解析中心，负责全局负载均衡，设备系统安装在管理中心机房，边缘主要指异地节点，CDN分发的载体，主要由Cache和负载均衡器等组成。

　　当用户访问加入CDN服务的网站时，域名解析请求将最终交给全局负载均衡DNS进行处理。全局负载均衡DNS通过一组预先定义好的策略，将当时最接近用户的节点地址提供给用户，使用户能够得到快速的服务。同时，它还与分布在世界各地的所有CDNC节点保持通信，搜集各节点的通信状态，确保不将用户的请求分配到不可用的CDN节点上，实际上是通过DNS做全局负载均衡。

　　对于普通的Internet用户来讲，每个CDN节点就相当于一个放置在它周围的WEB。通过全局负载均衡DNS的控制，用户的请求被透明地指向离他最近的节点，节点中CDN服务器会像网站的原始服务器一样，响应用户的请求。由于它离用户更近，因而响应时间必然更快。

![img](http://p1.pstatp.com/large/tos-cn-i-0022/2db36f5f97ab488da7149a83761bac89)



　　每个CDN节点由两部分组成：负载均衡设备和高速缓存服务器

　　负载均衡设备负责每个节点中各个Cache的负载均衡，保证节点的工作效率；同时，负载均衡设备还负责收集节点与周围环境的信息，保持与全局负载DNS的通信，实现整个系统的负载均衡。

　　**高速缓存服务器（Cache）负责存储客户网站的大量信息，就像一个靠近用户的网站服务器一样响应本地用户的访问请求。**

　　CDN的管理系统是整个系统能够正常运转的保证。它不仅能对系统中的各个子系统和设备进行实时监控，对各种故障产生相应的告警，还可以实时监测到系统中总的流量和各节点的流量，并保存在系统的数据库中，使网管人员能够方便地进行进一步分析。通过完善的网管系统，用户可以对系统配置进行修改。

![img](http://p9.pstatp.com/large/2e9540009cdd463046a69)



　　理论上，最简单的CDN网络有一个负责全局负载均衡的DNS和各节点一台Cache，即可运行。DNS支持根据用户源IP地址解析不同的IP，实现就近访问。为了保证高可用性等，需要监视各节点的流量、健康状况等。一个节点的单台Cache承载数量不够时，才需要多台Cache，多台Cache同时工作，才需要负载均衡器，使Cache群协同工作。